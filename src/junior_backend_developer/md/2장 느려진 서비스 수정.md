# 느려진 서비스 어디부터 봐야 할까?
# 처리량과 응답 시간
서버 성능 관련 : 응답 시간과 처리량

## 응답 시간
TTFB, TTLB 중에서 하나 사용해서 측정해보자

필자의 경우 외부 연동과 db연결이 전체 처리시간의 상당수를 차지했던 경험.

## 처리량
tps가 5인 서버에 1초짜리 요청이 7개 들어오면 나중에 들어온 2개의 요청은 2초의 응답시간이 걸림
줄이는 법
- 서버가 동시에 처리할 수 있는 요청량 늘리기
- 처리 시간 자체를 줄여 대기 시간 줄이기


# 서버 성능 개선 기초
## 병목지점
처리 시간이 오래 걸리는 작업 식별하자

로드벨런서
: 라운드로빈, ip 해시

## db 커넥션풀

## 커넥션 풀 크기
Db 사용 3단계
- db에 연결
- 쿼리 실행
- 연결 종료

이런 연결 시간을 줄이기 위해서 커넥션 풀을 제공한다
- 커넥션 풀 크기
- 풀에 커넥션이 없을 때 대기 시간
- 커넥션 유지 시간

이렇게 있다.

## 커넥션 풀 크기
최소 커넥션 풀의 크기를 최대 사용량에 맞출 필요가 있다. 다만 db cpu	사용량이 이미 높은 상황에서 그렇게 하면 문제가 생김


히카리 cp 응답 대기시간은 0.5초에서~ 3초 사이가 좋다.

## 최대유휴시간, 유효성 검사, 최대 유지 시간
