# 성능에 핵심인 DB
출석 체크 시간에 DB장비의 cpu 사용률이 90%를 넘김

문제는 풀스캔 때문이었음. 호출빈도가 높은 쿼리에서 풀스캔을 하고 있었음.

DB성능은 연동하는 모든 서버 성능에 영향을 준다.

보통은 DB자체가 문제가 아니라, db를 잘못 사용해서 생기는 문제가 많다. 

너무 적은 데이터에는 인덱스 걸 필요가 없다.

전문 검색 인덱스: 특정 문자를 포함하는지 여부를 FULLTEXT를 사용하면 풀 스캔 없이 문자열 검색 쿼리를 실행할 수 있다 

색인: 문서를 특정 값으로 매핑시켜놓음. 
역색인: 특정 값, 단어를 특정 문서, 혹은 데이터에 매핑시켜놓음. 

FULLTEXT 사용 시 일반인덱스 보다도 3 - 10배까지 커질 수 있다. 

## 단일 인덱스, 복합 인덱스
복합 인덱스 걸 때 고려할 점
복합 인덱스를 걸지 고민하는 것은, 단일 인덱스를 거쳐왔을 때 남아있는 데이터의 수량을 통해서 파악해볼 수 있다. 

## 선택도를 고려한 인덱스 칼럼 선택
선택도 = 인덱스에서 특정 칼럼의 고유한 값 비율
선택도가 높음 = 인덱스에서 특정 칼럼의 고유한 값 비율이 높음

선택도가 낮으면, 인덱스로 걸렀을 때 => 여전히 많은 데이터가 남아있음
선택도가 높으면, 인덱스로 걸렀을 때 => 적은 데이터가 남아있음

---
### 선택도가 낮아도 선택하는 경우
해당 작업이 너무 빈번해서 해당 작업이 오래 걸리면 다른 작업들에도 모두 악영향을 끼칠 때 사용함

## 커버링 인덱스

## 인덱스는 필요한 만큼만 만들기
예제) userId, activityDate, activityType: 이렇게 3개 할 때 만약 3번째도 해야하는 경우는 한 사용하자 하루에 만들어내는 데이터가 의미 있을 정도로 많아야지 된다. 

